<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Envoyer de l‚Äôargent √† Christophe</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function toggleRIB() {
      const ribContainer = document.getElementById("rib-container");
      const btn = document.getElementById("toggle-rib-btn");
      const isHidden = ribContainer.classList.contains("hidden");
      ribContainer.classList.toggle("hidden");
      btn.innerText = isHidden ? "Masquer le RIB" : "Afficher le RIB";
    }

    function copyText(elementId, buttonId) {
      const text = document.getElementById(elementId).innerText.trim();
      navigator.clipboard.writeText(text).then(() => {
        const btn = document.getElementById(buttonId);
        btn.innerText = "Copi√© ‚úÖ";
        setTimeout(() => btn.innerText = "Copier", 2000);
      });
    }

    function openPayPal() {
      const amountInput = document.getElementById("amount");
      const amount = parseFloat(amountInput.value.replace(",", "."));
      const basePaypal = "https://paypal.me/clabat"; // lien PayPal

      const link = (!isNaN(amount) && amount > 0)
        ? `${basePaypal}/${amount.toString().replace(",", ".")}`
        : basePaypal;

      window.open(link, "_blank");
    }

    function updateAmounts() {
      const amountInput = document.getElementById("amount");
      const amount = parseFloat(amountInput.value.replace(",", "."));
      const displays = document.querySelectorAll(".amount-display");

      if (!isNaN(amount) && amount > 0) {
        const formatted = amount.toString().replace(",", ".");
        displays.forEach(el => el.innerText = `(${formatted} ‚Ç¨)`);
      } else {
        displays.forEach(el => el.innerText = "");
      }
    }

    function initFromURL() {
      let montant = null;
    
      // 1Ô∏è‚É£ - V√©rifie d'abord s'il y a un param√®tre classique (pour compatibilit√©)
      const params = new URLSearchParams(window.location.search);
      if (params.has("montant")) {
        montant = params.get("montant");
      }
    
      // 2Ô∏è‚É£ - Si aucun param√®tre, essaye de lire le dernier segment de l‚ÄôURL
      if (!montant) {
        const pathParts = window.location.pathname.split("/").filter(Boolean);
        const lastPart = pathParts[pathParts.length - 1];
        if (!isNaN(parseFloat(lastPart))) {
          montant = lastPart;
        }
      }
    
      // 3Ô∏è‚É£ - Si on a trouv√© un montant valide, on l'affiche dans le champ
      if (montant) {
        document.getElementById("amount").value = montant;
        updateAmounts();
      }
    }

    window.onload = initFromURL;
  </script>
</head>
<body class="bg-gray-50 flex flex-col items-center justify-center min-h-screen p-4">
  <div class="bg-white shadow-lg rounded-2xl p-6 w-full max-w-sm text-center">
    <h1 class="text-2xl font-semibold mb-4 text-gray-800">
      Envoyer de l‚Äôargent √† <span class="text-blue-600">Christophe</span>
    </h1>

    <!-- Champ Montant -->
    <div class="mb-6">
      <label for="amount" class="block text-sm font-medium text-gray-700 mb-1">Montant √† envoyer (‚Ç¨)</label>
      <input id="amount" type="number" min="0" step="0.01" placeholder="Ex: 25"
             class="w-full border rounded-lg px-3 py-2 text-center focus:outline-none focus:ring-2 focus:ring-blue-400"
             oninput="updateAmounts()">
    </div>

    <!-- Section RIB -->
    <div class="border p-3 rounded-lg mb-4 text-left">
      <div class="flex justify-between items-center">
        <p class="font-medium">üí≥ RIB</p>
        <button id="toggle-rib-btn" onclick="toggleRIB()" 
                class="bg-gray-200 text-gray-800 text-sm px-3 py-1 rounded-lg hover:bg-gray-300 transition">
          Afficher le RIB
        </button>
      </div>
      <div id="rib-container" class="hidden mt-3">
        <div class="flex justify-between items-center gap-2">
          <p id="rib-number" class="text-sm text-gray-700 break-all select-all">
            FR76 1234 5678 9012 3456 7890 123
          </p>
          <button id="copy-btn-rib" onclick="copyText('rib-number', 'copy-btn-rib')" 
                  class="bg-blue-500 text-white text-xs px-2 py-1 rounded-lg hover:bg-blue-600 transition shrink-0">
            Copier
          </button>
        </div>
      </div>
    </div>

    <!-- Section PayPal -->
    <div class="border p-3 rounded-lg mb-4 text-left">
      <div class="flex justify-between items-center">
        <p class="font-medium">üí∞ PayPal </span></p>
        <button onclick="openPayPal()" 
                class="bg-blue-500 text-white text-sm px-3 py-1 rounded-lg hover:bg-blue-600 transition">
          Lien
        </button>
      </div>
    </div>

    <!-- Section Applications (Lydia + Wero regroup√©s) -->
    <div class="border p-3 rounded-lg text-left">
      <p class="font-medium">üì± Lydia et Wero </span></p>
      <div class="mt-2 text-gray-700 text-sm flex justify-between items-center gap-2">
        <p id="phone-number">+33 6 12 34 56 78</p>
        <button id="copy-btn-phone" onclick="copyText('phone-number', 'copy-btn-phone')" 
                class="bg-blue-500 text-white text-xs px-2 py-1 rounded-lg hover:bg-blue-600 transition shrink-0">
          Copier
        </button>
      </div>
    </div>

    <p class="mt-6 text-xs text-gray-400">Merci ‚ù§Ô∏è</p>
  </div>
</body>
</html>


